<!DOCTYPE html>
<html>
  <head>
    <title>Influencer Detail</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      .verification-status-verified {
        background-color: #10b981;
        color: white;
      }
      .verification-status-questionable {
        background-color: #f59e0b;
        color: white;
      }
      .verification-status-debunked {
        background-color: #ef4444;
        color: white;
      }
      .evidence-section {
        max-height: 200px;
        overflow-y: auto;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8">
      <!-- Influencer Profile Section -->
      <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
        <div class="flex items-center space-x-4">
          <img
            src="https://pbs.twimg.com/profile_images/{{ profile_image }}"
            alt="Profile"
            class="w-24 h-24 rounded-full"
            onerror="this.src='https://via.placeholder.com/96'"
          />
          <div>
            <h1 class="text-2xl font-bold">
              @{{ username|default('hubermanlab') }}
            </h1>
            <div class="text-gray-600">
              <span class="font-semibold"
                >{{ follower_count|default('2.1M') }}</span
              >
              followers
            </div>
          </div>
        </div>
      </div>

      {% with messages = get_flashed_messages() %} {% if messages %} {% for
      message in messages %}
      <div
        class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"
      >
        {{ message }}
      </div>
      {% endfor %} {% endif %} {% endwith %} {% if not error %}
      <!-- Claims Analysis Section -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% if verification_results %} {% for claim, result in
        verification_results.items() %}
        <div class="bg-white rounded-lg shadow-lg p-6">
          <div class="mb-4">
            <h3 class="text-lg font-semibold">{{ claim }}</h3>
            <span
              class="inline-block px-3 py-1 rounded-full text-sm font-semibold mt-2 {% if result.verification_status == 'Verified' %} verification-status-verified {% elif result.verification_status == 'Questionable' %} verification-status-questionable {% else %} verification-status-debunked {% endif %}"
            >
              {{ result.verification_status }}
            </span>
          </div>

          {% if result.supporting_evidence %}
          <div class="mb-4">
            <h4 class="font-medium text-green-600">Supporting Evidence</h4>
            <div class="evidence-section mt-2 text-sm text-gray-600">
              <ul class="list-disc pl-5">
                {% for abstract in result.supporting_evidence %}
                <li class="mb-2">{{ abstract }}</li>
                {% endfor %}
              </ul>
            </div>
          </div>
          {% endif %} {% if result.contradicting_evidence %}
          <div class="mb-4">
            <h4 class="font-medium text-red-600">Contradicting Evidence</h4>
            <div class="evidence-section mt-2 text-sm text-gray-600">
              <ul class="list-disc pl-5">
                {% for abstract in result.contradicting_evidence %}
                <li class="mb-2">{{ abstract }}</li>
                {% endfor %}
              </ul>
            </div>
          </div>
          {% endif %}

          <div>
            <h4 class="font-medium text-gray-700">Research Sources</h4>
            <div class="evidence-section mt-2">
              <ul class="space-y-2">
                {% for article in result.pubmed_results %}
                <li>
                  <a
                    href="{{ article.url }}"
                    target="_blank"
                    class="text-blue-600 hover:text-blue-800 text-sm"
                  >
                    {{ article.title }}
                  </a>
                </li>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
        {% endfor %} {% else %}
        <div
          class="col-span-2 bg-white rounded-lg shadow p-6 text-center text-gray-600"
        >
          No health claims found.
        </div>
        {% endif %}
      </div>
      {% endif %}
    </div>
  </body>
</html>
